import{p as _}from"./view.3ef09da1.js";const G=(()=>{let n=0;return()=>(n+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${n}`)})();function S(n){const i=[];for(let t=0,r=n.length;t<r;t++)i.push(n[t]);return i}function v(n,i){const t=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(i);return t?parseFloat(t.replace("px","")):0}function O(n,i={}){return{width:i.width||function(t){const r=v(t,"border-left-width"),o=v(t,"border-right-width");return t.clientWidth+r+o}(n),height:i.height||function(t){const r=v(t,"border-top-width"),o=v(t,"border-bottom-width");return t.clientHeight+r+o}(n)}}const y=16384;function P(n){return new Promise((i,t)=>{const r=new Image;r.decode=()=>i(r),r.onload=()=>i(r),r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}const p=(n,i)=>{if(n instanceof i)return!0;const t=Object.getPrototypeOf(n);return t!==null&&(t.constructor.name===i.name||p(t,i))};function I(n,i,t){const r=window.getComputedStyle(n,t),o=r.getPropertyValue("content");if(o===""||o==="none")return;const s=G();try{i.className=`${i.className} ${s}`}catch{return}const e=document.createElement("style");e.appendChild(function(c,a,l){const u=`.${c}:${a}`,d=l.cssText?function(f){const h=f.getPropertyValue("content");return`${f.cssText} content: '${h.replace(/'|"/g,"")}';`}(l):function(f){return S(f).map(h=>`${h}: ${f.getPropertyValue(h)}${f.getPropertyPriority(h)?" !important":""};`).join(" ")}(l);return document.createTextNode(`${u}{${d}}`)}(s,t,r)),i.appendChild(e)}const k="application/font-woff",M="image/jpeg",Q={woff:k,woff2:k,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:M,jpeg:M,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function L(n){const i=function(t){const r=/\.([^./]*?)$/g.exec(t);return r?r[1]:""}(n).toLowerCase();return Q[i]||""}function A(n){return n.search(/^(data:)/)!==-1}function j(n,i){return`data:${i};base64,${n}`}async function U(n,i,t){const r=await fetch(n,i);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise((s,e)=>{const c=new FileReader;c.onerror=e,c.onloadend=()=>{try{s(t({res:r,result:c.result}))}catch(a){e(a)}},c.readAsDataURL(o)})}const T={};async function N(n,i,t){const r=function(s,e,c){let a=s.replace(/\?.*/,"");return c&&(a=s),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),e?`[${e}]${a}`:a}(n,i,t.includeQueryParams);if(T[r]!=null)return T[r];let o;t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());try{const s=await U(n,t.fetchRequestInit,({res:e,result:c})=>(i||(i=e.headers.get("Content-Type")||""),function(a){return a.split(/,/)[1]}(c)));o=j(s,i)}catch(s){o=t.imagePlaceholder||"";let e=`Failed to fetch resource: ${n}`;s&&(e=typeof s=="string"?s:s.message)}return T[r]=o,o}const X=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT";async function R(n,i,t){return t||!i.filter||i.filter(n)?Promise.resolve(n).then(r=>async function(o,s){return p(o,HTMLCanvasElement)?async function(e){const c=e.toDataURL();return c==="data:,"?e.cloneNode(!1):P(c)}(o):p(o,HTMLVideoElement)?async function(e,c){if(e.currentSrc){const u=document.createElement("canvas"),d=u.getContext("2d");return u.width=e.clientWidth,u.height=e.clientHeight,d==null||d.drawImage(e,0,0,u.width,u.height),P(u.toDataURL())}const a=e.poster,l=L(a);return P(await N(a,l,c))}(o,s):p(o,HTMLIFrameElement)?async function(e){var c;try{if(!((c=e==null?void 0:e.contentDocument)===null||c===void 0)&&c.body)return await R(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}(o):o.cloneNode(!1)}(r,i)).then(r=>async function(o,s,e){var c,a;let l=[];return l=X(o)&&o.assignedNodes?S(o.assignedNodes()):p(o,HTMLIFrameElement)&&(!((c=o.contentDocument)===null||c===void 0)&&c.body)?S(o.contentDocument.body.childNodes):S(((a=o.shadowRoot)!==null&&a!==void 0?a:o).childNodes),l.length===0||p(o,HTMLVideoElement)||await l.reduce((u,d)=>u.then(()=>R(d,e)).then(f=>{f&&s.appendChild(f)}),Promise.resolve()),s}(n,r,i)).then(r=>function(o,s){return p(s,Element)&&(function(e,c){const a=c.style;if(!a)return;const l=window.getComputedStyle(e);l.cssText?(a.cssText=l.cssText,a.transformOrigin=l.transformOrigin):S(l).forEach(u=>{let d=l.getPropertyValue(u);u==="font-size"&&d.endsWith("px")&&(d=`${Math.floor(parseFloat(d.substring(0,d.length-2)))-.1}px`),p(e,HTMLIFrameElement)&&u==="display"&&d==="inline"&&(d="block"),u==="d"&&c.getAttribute("d")&&(d=`path(${c.getAttribute("d")})`),a.setProperty(u,d,l.getPropertyPriority(u))})}(o,s),function(e,c){I(e,c,":before"),I(e,c,":after")}(o,s),function(e,c){p(e,HTMLTextAreaElement)&&(c.innerHTML=e.value),p(e,HTMLInputElement)&&c.setAttribute("value",e.value)}(o,s),function(e,c){if(p(e,HTMLSelectElement)){const a=c,l=Array.from(a.children).find(u=>e.value===u.getAttribute("value"));l&&l.setAttribute("selected","")}}(o,s)),s}(n,r)).then(r=>async function(o,s){const e=o.querySelectorAll?o.querySelectorAll("use"):[];if(e.length===0)return o;const c={};for(let l=0;l<e.length;l++){const u=e[l].getAttribute("xlink:href");if(u){const d=o.querySelector(u),f=document.querySelector(u);d||!f||c[u]||(c[u]=await R(f,s,!0))}}const a=Object.values(c);if(a.length){const l="http://www.w3.org/1999/xhtml",u=document.createElementNS(l,"svg");u.setAttribute("xmlns",l),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(l,"defs");u.appendChild(d);for(let f=0;f<a.length;f++)d.appendChild(a[f]);o.appendChild(u)}return o}(r,i)):null}const q=/url\((['"]?)([^'"]+?)\1\)/g,J=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,K=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function z(n){return n.search(q)!==-1}async function W(n,i,t){if(!z(n))return n;const r=function(s,{preferredFontFormat:e}){return e?s.replace(K,c=>{for(;;){const[a,,l]=J.exec(c)||[];if(!l)return"";if(l===e)return`src: ${a};`}}):s}(n,t);return function(s){const e=[];return s.replace(q,(c,a,l)=>(e.push(l),c)),e.filter(c=>!A(c))}(r).reduce((s,e)=>s.then(c=>async function(a,l,u,d,f){try{const h=u?function(m,w){if(m.match(/^[a-z]+:\/\//i))return m;if(m.match(/^\/\//))return window.location.protocol+m;if(m.match(/^[a-z]+:/i))return m;const x=document.implementation.createHTMLDocument(),E=x.createElement("base"),$=x.createElement("a");return x.head.appendChild(E),x.body.appendChild($),w&&(E.href=w),$.href=m,$.href}(l,u):l,g=L(l);let b;return b=f?j(await f(h),g):await N(h,g,d),a.replace(function(m){const w=m.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${w})(['"]?\\))`,"g")}(l),`$1${b}$3`)}catch{}return a}(c,e,i,t)),Promise.resolve(r))}async function C(n,i,t){var r;const o=(r=i.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(o){const s=await W(o,null,t);return i.style.setProperty(n,s,i.style.getPropertyPriority(n)),!0}return!1}async function B(n,i){p(n,Element)&&(await async function(t,r){await C("background",t,r)||await C("background-image",t,r),await C("mask",t,r)||await C("mask-image",t,r)}(n,i),await async function(t,r){const o=p(t,HTMLImageElement);if((!o||A(t.src))&&(!p(t,SVGImageElement)||A(t.href.baseVal)))return;const s=o?t.src:t.href.baseVal,e=await N(s,L(s),r);await new Promise((c,a)=>{t.onload=c,t.onerror=a;const l=t;l.decode&&(l.decode=c),l.loading==="lazy"&&(l.loading="eager"),o?(t.srcset="",t.src=e):t.href.baseVal=e})}(n,i),await async function(t,r){const o=S(t.childNodes).map(s=>B(s,r));await Promise.all(o).then(()=>t)}(n,i))}const H={};async function D(n){let i=H[n];if(i!=null)return i;const t=await fetch(n);return i={url:n,cssText:await t.text()},H[n]=i,i}async function V(n,i){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(t.match(/url\([^)]+\)/g)||[]).map(async s=>{let e=s.replace(r,"$1");return e.startsWith("https://")||(e=new URL(e,n.url).href),U(e,i.fetchRequestInit,({result:c})=>(t=t.replace(s,`url(${c})`),[s,c]))});return Promise.all(o).then(()=>t)}function F(n){if(n==null)return[];const i=[];let t=n.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(t);if(e===null)break;i.push(e[0])}t=t.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(t);if(e===null){if(e=s.exec(t),e===null)break;o.lastIndex=s.lastIndex}else s.lastIndex=o.lastIndex;i.push(e[0])}return i}async function Y(n,i){const t=i.fontEmbedCSS!=null?i.fontEmbedCSS:i.skipFonts?null:await async function(r,o){const s=await async function(e,c){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const a=S(e.ownerDocument.styleSheets),l=await async function(u,d){const f=[],h=[];return u.forEach(g=>{if("cssRules"in g)try{S(g.cssRules||[]).forEach((b,m)=>{if(b.type===CSSRule.IMPORT_RULE){let w=m+1;const x=D(b.href).then(E=>V(E,d)).then(E=>F(E).forEach($=>{try{g.insertRule($,$.startsWith("@import")?w+=1:g.cssRules.length)}catch{}})).catch(E=>{});h.push(x)}})}catch{const m=u.find(w=>w.href==null)||document.styleSheets[0];g.href!=null&&h.push(D(g.href).then(w=>V(w,d)).then(w=>F(w).forEach(x=>{m.insertRule(x,g.cssRules.length)})).catch(w=>{}))}}),Promise.all(h).then(()=>(u.forEach(g=>{if("cssRules"in g)try{S(g.cssRules||[]).forEach(b=>{f.push(b)})}catch{}}),f))}(a,c);return function(u){return u.filter(d=>d.type===CSSRule.FONT_FACE_RULE).filter(d=>z(d.style.getPropertyValue("src")))}(l)}(r,o);return(await Promise.all(s.map(e=>{const c=e.parentStyleSheet?e.parentStyleSheet.href:null;return W(e.cssText,c,o)}))).join(`
`)}(n,i);if(t){const r=document.createElement("style"),o=document.createTextNode(t);r.appendChild(o),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function Z(n,i={}){const{width:t,height:r}=O(n,i),o=await R(n,i,!0);return await Y(o,i),await B(o,i),function(s,e){const{style:c}=s;e.backgroundColor&&(c.backgroundColor=e.backgroundColor),e.width&&(c.width=`${e.width}px`),e.height&&(c.height=`${e.height}px`);const a=e.style;a!=null&&Object.keys(a).forEach(l=>{c[l]=a[l]})}(o,i),await async function(s,e,c){const a="http://www.w3.org/2000/svg",l=document.createElementNS(a,"svg"),u=document.createElementNS(a,"foreignObject");return l.setAttribute("width",`${e}`),l.setAttribute("height",`${c}`),l.setAttribute("viewBox",`0 0 ${e} ${c}`),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("externalResourcesRequired","true"),l.appendChild(u),u.appendChild(s),async function(d){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(d)).then(encodeURIComponent).then(f=>`data:image/svg+xml;charset=utf-8,${f}`)}(l)}(o,t,r)}async function ne(n,i={}){return(await async function(t,r={}){const{width:o,height:s}=O(t,r),e=await Z(t,r),c=await P(e),a=document.createElement("canvas"),l=a.getContext("2d"),u=r.pixelRatio||function(){let h,g;try{g=_}catch{}const b=g&&g.env?g.env.devicePixelRatio:null;return b&&(h=parseInt(b,10),Number.isNaN(h)&&(h=1)),h||window.devicePixelRatio||1}(),d=r.canvasWidth||o,f=r.canvasHeight||s;return a.width=d*u,a.height=f*u,r.skipAutoScale||function(h){(h.width>y||h.height>y)&&(h.width>y&&h.height>y?h.width>h.height?(h.height*=y/h.width,h.width=y):(h.width*=y/h.height,h.height=y):h.width>y?(h.height*=y/h.width,h.width=y):(h.width*=y/h.height,h.height=y))}(a),a.style.width=`${d}`,a.style.height=`${f}`,r.backgroundColor&&(l.fillStyle=r.backgroundColor,l.fillRect(0,0,a.width,a.height)),l.drawImage(c,0,0,a.width,a.height),a}(n,i)).toDataURL()}export{ne as t};
